# jsprettifier-bookmarklet
A bookmarklet for prettifying JavaScript directly in browser.

<img src="http://i.imgur.com/GtnF0pU.gif" width="600px">

# Usage

Open JavaScript file in your browser and then run the Bookmarklet or alternatively run it as a [DevTools snippet](http://www.briangrinstead.com/blog/devtools-snippets).

# Installation

Add this to Bookmarks or save as a [DevTools snippet](http://www.briangrinstead.com/blog/devtools-snippets):

```javascript
javascript:(function(){"use strict";function e(){(function(){function e(e,t){for(var n=0;n<t.length;n+=1)if(t[n]===e)return!0;return!1}function t(e){return e.replace(/^\s+|\s+$/g,"")}function n(e){return e.replace(/^\s+/g,"")}function r(e,t){var n=new a(e,t);return n.beautify()}function a(r,a){function i(e,t){var n=0;e&&(n=e.indentation_level,!F.just_added_newline()&&e.line_indent_level>n&&(n=e.line_indent_level));var r={mode:t,parent:e,last_text:e?e.last_text:"",last_word:e?e.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:n,line_indent_level:e?e.line_indent_level:n,start_line_index:F.get_line_number(),ternary_depth:0};return r}function c(e){var t=e.newlines,n=te.keep_array_indentation&&T(Z.mode);if(n)for(r=0;t>r;r+=1)f(r>0);else if(te.max_preserve_newlines&&t>te.max_preserve_newlines&&(t=te.max_preserve_newlines),te.preserve_newlines&&e.newlines>1){f();for(var r=1;t>r;r+=1)f(!0)}$=e,ee[$.type]()}function d(e){e=e.replace(/\x0d/g,"");for(var t=[],n=e.indexOf("\n");-1!==n;)t.push(e.substring(0,n)),e=e.substring(n+1),n=e.indexOf("\n");return e.length&&t.push(e),t}function u(e){if(e=void 0===e?!1:e,!F.just_added_newline())if(te.preserve_newlines&&$.wanted_newline||e)f(!1,!0);else if(te.wrap_line_length){var t=F.current_line.get_character_count()+$.text.length+(F.space_before_token?1:0);t>=te.wrap_line_length&&f(!1,!0)}}function f(e,t){if(!t&&";"!==Z.last_text&&","!==Z.last_text&&"="!==Z.last_text&&"TK_OPERATOR"!==Q)for(;Z.mode===l.Statement&&!Z.if_block&&!Z.do_block;)x();F.add_new_line(e)&&(Z.multiline_frame=!0)}function p(){F.just_added_newline()&&(te.keep_array_indentation&&T(Z.mode)&&$.wanted_newline?(F.current_line.push($.whitespace_before),F.space_before_token=!1):F.set_indent(Z.indentation_level)&&(Z.line_indent_level=Z.indentation_level))}function h(e){return F.raw?void F.add_raw_token($):(te.comma_first&&"TK_COMMA"===Q&&F.just_added_newline()&&","===F.previous_line.last()&&(F.previous_line.pop(),p(),F.add_token(","),F.space_before_token=!0),e=e||$.text,p(),void F.add_token(e))}function g(){Z.indentation_level+=1}function m(){Z.indentation_level>0&&(!Z.parent||Z.indentation_level>Z.parent.indentation_level)&&(Z.indentation_level-=1)}function E(e){Z?(q.push(Z),J=Z):J=i(null,e),Z=i(J,e)}function T(e){return e===l.ArrayLiteral}function b(t){return e(t,[l.Expression,l.ForInitializer,l.Conditional])}function x(){q.length>0&&(J=Z,Z=q.pop(),J.mode===l.Statement&&F.remove_redundant_indentation(J))}function y(){return Z.parent.mode===l.ObjectLiteral&&Z.mode===l.Statement&&(":"===Z.last_text&&0===Z.ternary_depth||"TK_RESERVED"===Q&&e(Z.last_text,["get","set"]))}function R(){return"TK_RESERVED"===Q&&e(Z.last_text,["var","let","const"])&&"TK_WORD"===$.type||"TK_RESERVED"===Q&&"do"===Z.last_text||"TK_RESERVED"===Q&&"return"===Z.last_text&&!$.wanted_newline||"TK_RESERVED"===Q&&"else"===Z.last_text&&("TK_RESERVED"!==$.type||"if"!==$.text)||"TK_END_EXPR"===Q&&(J.mode===l.ForInitializer||J.mode===l.Conditional)||"TK_WORD"===Q&&Z.mode===l.BlockStatement&&!Z.in_case&&"--"!==$.text&&"++"!==$.text&&"function"!==G&&"TK_WORD"!==$.type&&"TK_RESERVED"!==$.type||Z.mode===l.ObjectLiteral&&(":"===Z.last_text&&0===Z.ternary_depth||"TK_RESERVED"===Q&&e(Z.last_text,["get","set"]))?(E(l.Statement),g(),"TK_RESERVED"===Q&&e(Z.last_text,["var","let","const"])&&"TK_WORD"===$.type&&(Z.declaration_statement=!0),y()||u("TK_RESERVED"===$.type&&e($.text,["do","for","if","while"])),!0):!1}function v(e,n){for(var r=0;r<e.length;r++){var a=t(e[r]);if(a.charAt(0)!==n)return!1}return!0}function K(e,t){for(var n,r=0,a=e.length;a>r;r++)if(n=e[r],n&&0!==n.indexOf(t))return!1;return!0}function w(t){return e(t,["case","return","do","if","throw","else"])}function k(e){var t=X+(e||0);return 0>t||t>=ne.length?null:ne[t]}function S(){R();var t=l.Expression;if("["===$.text){if("TK_WORD"===Q||")"===Z.last_text)return"TK_RESERVED"===Q&&e(Z.last_text,U.line_starters)&&(F.space_before_token=!0),E(t),h(),g(),void(te.space_in_paren&&(F.space_before_token=!0));t=l.ArrayLiteral,T(Z.mode)&&("["===Z.last_text||","===Z.last_text&&("]"===G||"}"===G))&&(te.keep_array_indentation||f())}else"TK_RESERVED"===Q&&"for"===Z.last_text?t=l.ForInitializer:"TK_RESERVED"===Q&&e(Z.last_text,["if","while"])&&(t=l.Conditional);";"===Z.last_text||"TK_START_BLOCK"===Q?f():"TK_END_EXPR"===Q||"TK_START_EXPR"===Q||"TK_END_BLOCK"===Q||"."===Z.last_text?u($.wanted_newline):"TK_RESERVED"===Q&&"("===$.text||"TK_WORD"===Q||"TK_OPERATOR"===Q?"TK_RESERVED"===Q&&("function"===Z.last_word||"typeof"===Z.last_word)||"*"===Z.last_text&&"function"===G?te.space_after_anon_function&&(F.space_before_token=!0):"TK_RESERVED"!==Q||!e(Z.last_text,U.line_starters)&&"catch"!==Z.last_text||te.space_before_conditional&&(F.space_before_token=!0):F.space_before_token=!0,"("===$.text&&"TK_RESERVED"===Q&&"await"===Z.last_word&&(F.space_before_token=!0),"("===$.text&&("TK_EQUALS"===Q||"TK_OPERATOR"===Q)&&(y()||u()),E(t),h(),te.space_in_paren&&(F.space_before_token=!0),g()}function A(){for(;Z.mode===l.Statement;)x();Z.multiline_frame&&u("]"===$.text&&T(Z.mode)&&!te.keep_array_indentation),te.space_in_paren&&("TK_START_EXPR"!==Q||te.space_in_empty_paren?F.space_before_token=!0:(F.trim(),F.space_before_token=!1)),"]"===$.text&&te.keep_array_indentation?(h(),x()):(x(),h()),F.remove_redundant_indentation(J),Z.do_while&&J.mode===l.Conditional&&(J.mode=l.Expression,Z.do_block=!1,Z.do_while=!1)}function O(){var t=k(1),n=k(2);E(n&&(":"===n.text&&e(t.type,["TK_STRING","TK_WORD","TK_RESERVED"])||e(t.text,["get","set"])&&e(n.type,["TK_WORD","TK_RESERVED"]))?e(G,["class","interface"])?l.BlockStatement:l.ObjectLiteral:l.BlockStatement);var r=!t.comments_before.length&&"}"===t.text,a=r&&"function"===Z.last_word&&"TK_END_EXPR"===Q;"expand"===te.brace_style||"none"===te.brace_style&&$.wanted_newline?"TK_OPERATOR"!==Q&&(a||"TK_EQUALS"===Q||"TK_RESERVED"===Q&&w(Z.last_text)&&"else"!==Z.last_text)?F.space_before_token=!0:f(!1,!0):"TK_OPERATOR"!==Q&&"TK_START_EXPR"!==Q?"TK_START_BLOCK"===Q?f():F.space_before_token=!0:T(J.mode)&&","===Z.last_text&&("}"===G?F.space_before_token=!0:f()),h(),g()}function D(){for(;Z.mode===l.Statement;)x();var e="TK_START_BLOCK"===Q;"expand"===te.brace_style?e||f():e||(T(Z.mode)&&te.keep_array_indentation?(te.keep_array_indentation=!1,f(),te.keep_array_indentation=!0):f()),x(),h()}function C(){if("TK_RESERVED"===$.type&&Z.mode!==l.ObjectLiteral&&e($.text,["set","get"])&&($.type="TK_WORD"),"TK_RESERVED"===$.type&&Z.mode===l.ObjectLiteral){var t=k(1);":"==t.text&&($.type="TK_WORD")}if(R()||!$.wanted_newline||b(Z.mode)||"TK_OPERATOR"===Q&&"--"!==Z.last_text&&"++"!==Z.last_text||"TK_EQUALS"===Q||!te.preserve_newlines&&"TK_RESERVED"===Q&&e(Z.last_text,["var","let","const","set","get"])||f(),Z.do_block&&!Z.do_while){if("TK_RESERVED"===$.type&&"while"===$.text)return F.space_before_token=!0,h(),F.space_before_token=!0,void(Z.do_while=!0);f(),Z.do_block=!1}if(Z.if_block)if(Z.else_block||"TK_RESERVED"!==$.type||"else"!==$.text){for(;Z.mode===l.Statement;)x();Z.if_block=!1,Z.else_block=!1}else Z.else_block=!0;if("TK_RESERVED"===$.type&&("case"===$.text||"default"===$.text&&Z.in_case_statement))return f(),(Z.case_body||te.jslint_happy)&&(m(),Z.case_body=!1),h(),Z.in_case=!0,void(Z.in_case_statement=!0);if("TK_RESERVED"===$.type&&"function"===$.text&&((e(Z.last_text,["}",";"])||F.just_added_newline()&&!e(Z.last_text,["[","{",":","=",","]))&&(F.just_added_blankline()||$.comments_before.length||(f(),f(!0))),"TK_RESERVED"===Q||"TK_WORD"===Q?"TK_RESERVED"===Q&&e(Z.last_text,["get","set","new","return","export","async"])?F.space_before_token=!0:"TK_RESERVED"===Q&&"default"===Z.last_text&&"export"===G?F.space_before_token=!0:f():"TK_OPERATOR"===Q||"="===Z.last_text?F.space_before_token=!0:(Z.multiline_frame||!b(Z.mode)&&!T(Z.mode))&&f()),("TK_COMMA"===Q||"TK_START_EXPR"===Q||"TK_EQUALS"===Q||"TK_OPERATOR"===Q)&&(y()||u()),"TK_RESERVED"===$.type&&e($.text,["function","get","set"]))return h(),void(Z.last_word=$.text);if(Y="NONE","TK_END_BLOCK"===Q?"TK_RESERVED"===$.type&&e($.text,["else","catch","finally"])?"expand"===te.brace_style||"end-expand"===te.brace_style||"none"===te.brace_style&&$.wanted_newline?Y="NEWLINE":(Y="SPACE",F.space_before_token=!0):Y="NEWLINE":"TK_SEMICOLON"===Q&&Z.mode===l.BlockStatement?Y="NEWLINE":"TK_SEMICOLON"===Q&&b(Z.mode)?Y="SPACE":"TK_STRING"===Q?Y="NEWLINE":"TK_RESERVED"===Q||"TK_WORD"===Q||"*"===Z.last_text&&"function"===G?Y="SPACE":"TK_START_BLOCK"===Q?Y="NEWLINE":"TK_END_EXPR"===Q&&(F.space_before_token=!0,Y="NEWLINE"),"TK_RESERVED"===$.type&&e($.text,U.line_starters)&&")"!==Z.last_text&&(Y="else"===Z.last_text||"export"===Z.last_text?"SPACE":"NEWLINE"),"TK_RESERVED"===$.type&&e($.text,["else","catch","finally"]))if("TK_END_BLOCK"!==Q||"expand"===te.brace_style||"end-expand"===te.brace_style||"none"===te.brace_style&&$.wanted_newline)f();else{F.trim(!0);var n=F.current_line;"}"!==n.last()&&f(),F.space_before_token=!0}else"NEWLINE"===Y?"TK_RESERVED"===Q&&w(Z.last_text)?F.space_before_token=!0:"TK_END_EXPR"!==Q?"TK_START_EXPR"===Q&&"TK_RESERVED"===$.type&&e($.text,["var","let","const"])||":"===Z.last_text||("TK_RESERVED"===$.type&&"if"===$.text&&"else"===Z.last_text?F.space_before_token=!0:f()):"TK_RESERVED"===$.type&&e($.text,U.line_starters)&&")"!==Z.last_text&&f():Z.multiline_frame&&T(Z.mode)&&","===Z.last_text&&"}"===G?f():"SPACE"===Y&&(F.space_before_token=!0);h(),Z.last_word=$.text,"TK_RESERVED"===$.type&&"do"===$.text&&(Z.do_block=!0),"TK_RESERVED"===$.type&&"if"===$.text&&(Z.if_block=!0)}function N(){for(R()&&(F.space_before_token=!1);Z.mode===l.Statement&&!Z.if_block&&!Z.do_block;)x();h()}function L(){R()?F.space_before_token=!0:"TK_RESERVED"===Q||"TK_WORD"===Q?F.space_before_token=!0:"TK_COMMA"===Q||"TK_START_EXPR"===Q||"TK_EQUALS"===Q||"TK_OPERATOR"===Q?y()||u():f(),h()}function P(){R(),Z.declaration_statement&&(Z.declaration_assignment=!0),F.space_before_token=!0,h(),F.space_before_token=!0}function V(){return Z.declaration_statement?(b(Z.parent.mode)&&(Z.declaration_assignment=!1),h(),void(Z.declaration_assignment?(Z.declaration_assignment=!1,f(!1,!0)):(F.space_before_token=!0,te.comma_first&&u()))):(h(),void(Z.mode===l.ObjectLiteral||Z.mode===l.Statement&&Z.parent.mode===l.ObjectLiteral?(Z.mode===l.Statement&&x(),f()):(F.space_before_token=!0,te.comma_first&&u())))}function j(){if(R(),"TK_RESERVED"===Q&&w(Z.last_text))return F.space_before_token=!0,void h();if("*"===$.text&&"TK_DOT"===Q)return void h();if(":"===$.text&&Z.in_case)return Z.case_body=!0,g(),h(),f(),void(Z.in_case=!1);if("::"===$.text)return void h();"TK_OPERATOR"===Q&&u();var t=!0,n=!0;e($.text,["--","++","!","~"])||e($.text,["-","+"])&&(e(Q,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||e(Z.last_text,U.line_starters)||","===Z.last_text)?(t=!1,n=!1,!$.wanted_newline||"--"!==$.text&&"++"!==$.text||f(!1,!0),";"===Z.last_text&&b(Z.mode)&&(t=!0),"TK_RESERVED"===Q?t=!0:"TK_END_EXPR"===Q?t=!("]"===Z.last_text&&("--"===$.text||"++"===$.text)):"TK_OPERATOR"===Q&&(t=e($.text,["--","-","++","+"])&&e(Z.last_text,["--","-","++","+"]),e($.text,["+","-"])&&e(Z.last_text,["--","++"])&&(n=!0)),Z.mode!==l.BlockStatement&&Z.mode!==l.Statement||"{"!==Z.last_text&&";"!==Z.last_text||f()):":"===$.text?0===Z.ternary_depth?t=!1:Z.ternary_depth-=1:"?"===$.text?Z.ternary_depth+=1:"*"===$.text&&"TK_RESERVED"===Q&&"function"===Z.last_text&&(t=!1,n=!1),F.space_before_token=F.space_before_token||t,h(),F.space_before_token=n}function M(){if(F.raw)return F.add_raw_token($),void($.directives&&"end"===$.directives.preserve&&(te.test_output_raw||(F.raw=!1)));if($.directives)return f(!1,!0),h(),"start"===$.directives.preserve&&(F.raw=!0),void f(!1,!0);if(!_.newline.test($.text)&&!$.wanted_newline)return F.space_before_token=!0,h(),void(F.space_before_token=!0);var e,t=d($.text),r=!1,a=!1,i=$.whitespace_before,o=i.length;for(f(!1,!0),t.length>1&&(v(t.slice(1),"*")?r=!0:K(t.slice(1),i)&&(a=!0)),h(t[0]),e=1;e<t.length;e++)f(!1,!0),r?h(" "+n(t[e])):a&&t[e].length>o?h(t[e].substring(o)):F.add_token(t[e]);f(!1,!0)}function B(){$.wanted_newline?f(!1,!0):F.trim(!0),F.space_before_token=!0,h(),f(!1,!0)}function I(){R(),"TK_RESERVED"===Q&&w(Z.last_text)?F.space_before_token=!0:u(")"===Z.last_text&&te.break_chained_methods),h()}function W(){h(),"\n"===$.text[$.text.length-1]&&f()}function z(){for(;Z.mode===l.Statement;)x()}var F,X,U,$,Q,G,H,Z,J,q,Y,ee,te,ne=[],re="";for(ee={TK_START_EXPR:S,TK_END_EXPR:A,TK_START_BLOCK:O,TK_END_BLOCK:D,TK_WORD:C,TK_RESERVED:C,TK_SEMICOLON:N,TK_STRING:L,TK_EQUALS:P,TK_OPERATOR:j,TK_COMMA:V,TK_BLOCK_COMMENT:M,TK_COMMENT:B,TK_DOT:I,TK_UNKNOWN:W,TK_EOF:z},a=a?a:{},te={},void 0!==a.braces_on_own_line&&(te.brace_style=a.braces_on_own_line?"expand":"collapse"),te.brace_style=a.brace_style?a.brace_style:te.brace_style?te.brace_style:"collapse","expand-strict"===te.brace_style&&(te.brace_style="expand"),te.indent_size=a.indent_size?parseInt(a.indent_size,10):4,te.indent_char=a.indent_char?a.indent_char:" ",te.eol=a.eol?a.eol:"\n",te.preserve_newlines=void 0===a.preserve_newlines?!0:a.preserve_newlines,te.break_chained_methods=void 0===a.break_chained_methods?!1:a.break_chained_methods,te.max_preserve_newlines=void 0===a.max_preserve_newlines?0:parseInt(a.max_preserve_newlines,10),te.space_in_paren=void 0===a.space_in_paren?!1:a.space_in_paren,te.space_in_empty_paren=void 0===a.space_in_empty_paren?!1:a.space_in_empty_paren,te.jslint_happy=void 0===a.jslint_happy?!1:a.jslint_happy,te.space_after_anon_function=void 0===a.space_after_anon_function?!1:a.space_after_anon_function,te.keep_array_indentation=void 0===a.keep_array_indentation?!1:a.keep_array_indentation,te.space_before_conditional=void 0===a.space_before_conditional?!0:a.space_before_conditional,te.unescape_strings=void 0===a.unescape_strings?!1:a.unescape_strings,te.wrap_line_length=void 0===a.wrap_line_length?0:parseInt(a.wrap_line_length,10),te.e4x=void 0===a.e4x?!1:a.e4x,te.end_with_newline=void 0===a.end_with_newline?!1:a.end_with_newline,te.comma_first=void 0===a.comma_first?!1:a.comma_first,te.test_output_raw=void 0===a.test_output_raw?!1:a.test_output_raw,te.jslint_happy&&(te.space_after_anon_function=!0),a.indent_with_tabs&&(te.indent_char="	",te.indent_size=1),te.eol=te.eol.replace(/\\r/,"\r").replace(/\\n/,"\n"),H="";te.indent_size>0;)H+=te.indent_char,te.indent_size-=1;var ae=0;if(r&&r.length){for(;" "===r.charAt(ae)||"	"===r.charAt(ae);)re+=r.charAt(ae),ae+=1;r=r.substring(ae)}Q="TK_START_BLOCK",G="",F=new o(H,re),F.raw=te.test_output_raw,q=[],E(l.BlockStatement),this.beautify=function(){var e,t;for(U=new s(r,te,H),ne=U.tokenize(),X=0;e=k();){for(var n=0;n<e.comments_before.length;n++)c(e.comments_before[n]);c(e),G=Z.last_text,Q=e.type,Z.last_text=e.text,X+=1}return t=F.get_code(),te.end_with_newline&&(t+="\n"),"\n"!=te.eol&&(t=t.replace(/[\n]/g,te.eol)),t}}function i(e){var t=0,n=-1,r=[],a=!0;this.set_indent=function(r){t=e.baseIndentLength+r*e.indent_length,n=r},this.get_character_count=function(){return t},this.is_empty=function(){return a},this.last=function(){return this._empty?null:r[r.length-1]},this.push=function(e){r.push(e),t+=e.length,a=!1},this.pop=function(){var e=null;return a||(e=r.pop(),t-=e.length,a=0===r.length),e},this.remove_indent=function(){n>0&&(n-=1,t-=e.indent_length)},this.trim=function(){for(;" "===this.last();)r.pop(),t-=1;a=0===r.length},this.toString=function(){var t="";return this._empty||(n>=0&&(t=e.indent_cache[n]),t+=r.join("")),t}}function o(e,t){t=t||"",this.indent_cache=[t],this.baseIndentLength=t.length,this.indent_length=e.length,this.raw=!1;var n=[];this.baseIndentString=t,this.indent_string=e,this.previous_line=null,this.current_line=null,this.space_before_token=!1,this.add_outputline=function(){this.previous_line=this.current_line,this.current_line=new i(this),n.push(this.current_line)},this.add_outputline(),this.get_line_number=function(){return n.length},this.add_new_line=function(e){return 1===this.get_line_number()&&this.just_added_newline()?!1:e||!this.just_added_newline()?(this.raw||this.add_outputline(),!0):!1},this.get_code=function(){var e=n.join("\n").replace(/[\r\n\t ]+$/,"");return e},this.set_indent=function(e){if(n.length>1){for(;e>=this.indent_cache.length;)this.indent_cache.push(this.indent_cache[this.indent_cache.length-1]+this.indent_string);return this.current_line.set_indent(e),!0}return this.current_line.set_indent(0),!1},this.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.add_outputline();this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1},this.add_token=function(e){this.add_space_before_token(),this.current_line.push(e)},this.add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&this.current_line.push(" "),this.space_before_token=!1},this.remove_redundant_indentation=function(e){if(!e.multiline_frame&&e.mode!==l.ForInitializer&&e.mode!==l.Conditional)for(var t=e.start_line_index,r=n.length;r>t;)n[t].remove_indent(),t++},this.trim=function(r){for(r=void 0===r?!1:r,this.current_line.trim(e,t);r&&n.length>1&&this.current_line.is_empty();)n.pop(),this.current_line=n[n.length-1],this.current_line.trim();this.previous_line=n.length>1?n[n.length-2]:null},this.just_added_newline=function(){return this.current_line.is_empty()},this.just_added_blankline=function(){if(this.just_added_newline()){if(1===n.length)return!0;var e=n[n.length-2];return e.is_empty()}return!1}}function s(n,r,a){function i(e){if(!e.match(R))return null;var t={};v.lastIndex=0;for(var n=v.exec(e);n;)t[n[1]]=n[2],n=v.exec(e);return t}function o(){var a,o=[];if(p=0,h="",E>=T)return["","TK_EOF"];var R;R=m.length?m[m.length-1]:new c("TK_START_BLOCK","{");var v=n.charAt(E);for(E+=1;e(v,l);){if(_.newline.test(v)?("\n"!==v||"\r"!==n.charAt(E-2))&&(p+=1,o=[]):o.push(v),E>=T)return["","TK_EOF"];v=n.charAt(E),E+=1}if(o.length&&(h=o.join("")),d.test(v)){var k=!0,S=!0,A=d;for("0"===v&&T>E&&/[Xx]/.test(n.charAt(E))?(k=!1,S=!1,v+=n.charAt(E),E+=1,A=u):(v="",E-=1);T>E&&A.test(n.charAt(E));)v+=n.charAt(E),E+=1,k&&T>E&&"."===n.charAt(E)&&(v+=n.charAt(E),E+=1,k=!1),S&&T>E&&/[Ee]/.test(n.charAt(E))&&(v+=n.charAt(E),E+=1,T>E&&/[+-]/.test(n.charAt(E))&&(v+=n.charAt(E),E+=1),S=!1,k=!1);return[v,"TK_WORD"]}if(_.isIdentifierStart(n.charCodeAt(E-1))){if(T>E)for(;_.isIdentifierChar(n.charCodeAt(E))&&(v+=n.charAt(E),E+=1,E!==T););return"TK_DOT"===R.type||"TK_RESERVED"===R.type&&e(R.text,["set","get"])||!e(v,b)?[v,"TK_WORD"]:"in"===v?[v,"TK_OPERATOR"]:[v,"TK_RESERVED"]}if("("===v||"["===v)return[v,"TK_START_EXPR"];if(")"===v||"]"===v)return[v,"TK_END_EXPR"];if("{"===v)return[v,"TK_START_BLOCK"];if("}"===v)return[v,"TK_END_BLOCK"];if(";"===v)return[v,"TK_SEMICOLON"];if("/"===v){var O="";if("*"===n.charAt(E)){E+=1,x.lastIndex=E;var D=x.exec(n);O="/*"+D[0],E+=D[0].length;var C=i(O);return C&&"start"===C.ignore&&(K.lastIndex=E,D=K.exec(n),O+=D[0],E+=D[0].length),O=O.replace(_.lineBreak,"\n"),[O,"TK_BLOCK_COMMENT",C]}if("/"===n.charAt(E)){E+=1,y.lastIndex=E;var D=y.exec(n);return O="//"+D[0],E+=D[0].length,[O,"TK_COMMENT"]}}if("`"===v||"'"===v||'"'===v||("/"===v||r.e4x&&"<"===v&&n.slice(E-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/))&&("TK_RESERVED"===R.type&&e(R.text,["return","case","throw","else","do","typeof","yield"])||"TK_END_EXPR"===R.type&&")"===R.text&&R.parent&&"TK_RESERVED"===R.parent.type&&e(R.parent.text,["if","while","for"])||e(R.type,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var N=v,L=!1,P=!1;if(a=v,"/"===N)for(var V=!1;T>E&&(L||V||n.charAt(E)!==N)&&!_.newline.test(n.charAt(E));)a+=n.charAt(E),L?L=!1:(L="\\"===n.charAt(E),"["===n.charAt(E)?V=!0:"]"===n.charAt(E)&&(V=!1)),E+=1;else if(r.e4x&&"<"===N){var j=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/g,M=n.slice(E-1),B=j.exec(M);if(B&&0===B.index){for(var I=B[2],W=0;B;){var z=!!B[1],F=B[2],X=!!B[B.length-1]||"![CDATA["===F.slice(0,8);if(F!==I||X||(z?--W:++W),0>=W)break;B=j.exec(M)}var U=B?B.index+B[0].length:M.length;return M=M.slice(0,U),E+=U-1,M=M.replace(_.lineBreak,"\n"),[M,"TK_STRING"]}}else for(;T>E&&(L||n.charAt(E)!==N&&("`"===N||!_.newline.test(n.charAt(E))));)(L||"`"===N)&&_.newline.test(n.charAt(E))?("\r"===n.charAt(E)&&"\n"===n.charAt(E+1)&&(E+=1),a+="\n"):a+=n.charAt(E),L?(("x"===n.charAt(E)||"u"===n.charAt(E))&&(P=!0),L=!1):L="\\"===n.charAt(E),E+=1;if(P&&r.unescape_strings&&(a=s(a)),T>E&&n.charAt(E)===N&&(a+=N,E+=1,"/"===N))for(;T>E&&_.isIdentifierStart(n.charCodeAt(E));)a+=n.charAt(E),E+=1;return[a,"TK_STRING"]}if("#"===v){if(0===m.length&&"!"===n.charAt(E)){for(a=v;T>E&&"\n"!==v;)v=n.charAt(E),a+=v,E+=1;return[t(a)+"\n","TK_UNKNOWN"]}var $="#";if(T>E&&d.test(n.charAt(E))){do v=n.charAt(E),$+=v,E+=1;while(T>E&&"#"!==v&&"="!==v);return"#"===v||("["===n.charAt(E)&&"]"===n.charAt(E+1)?($+="[]",E+=2):"{"===n.charAt(E)&&"}"===n.charAt(E+1)&&($+="{}",E+=2)),[$,"TK_WORD"]}}if("<"===v&&("?"===n.charAt(E)||"%"===n.charAt(E))){w.lastIndex=E-1;var Q=w.exec(n);if(Q)return v=Q[0],E+=v.length-1,v=v.replace(_.lineBreak,"\n"),[v,"TK_STRING"]}if("<"===v&&"<!--"===n.substring(E-1,E+3)){for(E+=3,v="<!--";!_.newline.test(n.charAt(E))&&T>E;)v+=n.charAt(E),E++;return g=!0,[v,"TK_COMMENT"]}if("-"===v&&g&&"-->"===n.substring(E-1,E+2))return g=!1,E+=2,["-->","TK_COMMENT"];if("."===v)return[v,"TK_DOT"];if(e(v,f)){for(;T>E&&e(v+n.charAt(E),f)&&(v+=n.charAt(E),E+=1,!(E>=T)););return","===v?[v,"TK_COMMA"]:"="===v?[v,"TK_EQUALS"]:[v,"TK_OPERATOR"]}return[v,"TK_UNKNOWN"]}function s(e){for(var t,n=!1,r="",a=0,i="",o=0;n||a<e.length;)if(t=e.charAt(a),a++,n){if(n=!1,"x"===t)i=e.substr(a,2),a+=2;else{if("u"!==t){r+="\\"+t;continue}i=e.substr(a,4),a+=4}if(!i.match(/^[0123456789abcdefABCDEF]+$/))return e;if(o=parseInt(i,16),o>=0&&32>o){r+="x"===t?"\\x"+i:"\\u"+i;continue}if(34===o||39===o||92===o)r+="\\"+String.fromCharCode(o);else{if("x"===t&&o>126&&255>=o)return e;r+=String.fromCharCode(o)}}else"\\"===t?n=!0:r+=t;return r}var l="\n\r	 ".split(""),d=/[0-9]/,u=/[0123456789abcdefABCDEF]/,f="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! ~ , : ? ^ ^= |= :: =>".split(" ");this.line_starters="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(",");var p,h,g,m,E,T,b=this.line_starters.concat(["do","in","else","get","set","new","catch","finally","typeof","yield","async","await"]),x=/([\s\S]*?)((?:\*\/)|$)/g,y=/([^\n\r\u2028\u2029]*)/g,R=/\/\* beautify( \w+[:]\w+)+ \*\//g,v=/ (\w+)[:](\w+)/g,K=/([\s\S]*?)((?:\/\*\sbeautify\signore:end\s\*\/)|$)/g,w=/((<\?php|<\?=)[\s\S]*?\?>)|(<%[\s\S]*?%>)/g;this.tokenize=function(){T=n.length,E=0,g=!1,m=[];for(var e,t,r,a=null,i=[],s=[];!t||"TK_EOF"!==t.type;){for(r=o(),e=new c(r[1],r[0],p,h);"TK_COMMENT"===e.type||"TK_BLOCK_COMMENT"===e.type||"TK_UNKNOWN"===e.type;)"TK_BLOCK_COMMENT"===e.type&&(e.directives=r[2]),s.push(e),r=o(),e=new c(r[1],r[0],p,h);s.length&&(e.comments_before=s,s=[]),"TK_START_BLOCK"===e.type||"TK_START_EXPR"===e.type?(e.parent=t,i.push(a),a=e):("TK_END_BLOCK"===e.type||"TK_END_EXPR"===e.type)&&a&&("]"===e.text&&"["===a.text||")"===e.text&&"("===a.text||"}"===e.text&&"{"===a.text)&&(e.parent=a.parent,a=i.pop()),m.push(e),t=e}return m}}var _={};(function(e){var t="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",n="\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",r=new RegExp("["+t+"]"),a=new RegExp("["+t+n+"]");e.newline=/[\n\r\u2028\u2029]/,e.lineBreak=/\r\n|[\n\r\u2028\u2029]/g,e.isIdentifierStart=function(e){return 65>e?36===e:91>e?!0:97>e?95===e:123>e?!0:e>=170&&r.test(String.fromCharCode(e))},e.isIdentifierChar=function(e){return 48>e?36===e:58>e?!0:65>e?!1:91>e?!0:97>e?95===e:123>e?!0:e>=170&&a.test(String.fromCharCode(e))}})(_);var l={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},c=function(e,t,n,r,a,i){this.type=e,this.text=t,this.comments_before=[],this.newlines=n||0,this.wanted_newline=n>0,this.whitespace_before=r||"",this.parent=null,this.directives=null};"function"==typeof define&&define.amd?define([],function(){return{js_beautify:r}}):"undefined"!=typeof exports?exports.js_beautify=r:"undefined"!=typeof window?window.js_beautify=r:"undefined"!=typeof global&&(global.js_beautify=r)})(),function(){var e="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},t=function(){var t=/\blang(?:uage)?-(?!\*)(\w+)\b/i,n=e.Prism={util:{encode:function(e){return e instanceof r?new r(e.type,n.util.encode(e.content),e.alias):"Array"===n.util.type(e)?e.map(n.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){var t=n.util.type(e);switch(t){case"Object":var r={};for(var a in e)e.hasOwnProperty(a)&&(r[a]=n.util.clone(e[a]));return r;case"Array":return e.map&&e.map(function(e){return n.util.clone(e)})}return e}},languages:{extend:function(e,t){var r=n.util.clone(n.languages[e]);for(var a in t)r[a]=t[a];return r},insertBefore:function(e,t,r,a){a=a||n.languages;var i=a[e];if(2==arguments.length){r=arguments[1];for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o]);return i}var s={};for(var _ in i)if(i.hasOwnProperty(_)){if(_==t)for(var o in r)r.hasOwnProperty(o)&&(s[o]=r[o]);s[_]=i[_]}return n.languages.DFS(n.languages,function(t,n){n===a[e]&&t!=e&&(this[t]=s)}),a[e]=s},DFS:function(e,t,r){for(var a in e)e.hasOwnProperty(a)&&(t.call(e,a,e[a],r||a),"Object"===n.util.type(e[a])?n.languages.DFS(e[a],t):"Array"===n.util.type(e[a])&&n.languages.DFS(e[a],t,a))}},plugins:{},highlightAll:function(e,t){for(var r,a=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),i=0;r=a[i++];)n.highlightElement(r,e===!0,t)},highlightElement:function(r,a,i){for(var o,s,_=r;_&&!t.test(_.className);)_=_.parentNode;_&&(o=(_.className.match(t)||[,""])[1],s=n.languages[o]),r.className=r.className.replace(t,"").replace(/\s+/g," ")+" language-"+o,_=r.parentNode,/pre/i.test(_.nodeName)&&(_.className=_.className.replace(t,"").replace(/\s+/g," ")+" language-"+o);var l=r.textContent,c={element:r,language:o,grammar:s,code:l};if(!l||!s)return void n.hooks.run("complete",c);if(n.hooks.run("before-highlight",c),a&&e.Worker){var d=new Worker(n.filename);d.onmessage=function(e){c.highlightedCode=e.data,n.hooks.run("before-insert",c),c.element.innerHTML=c.highlightedCode,i&&i.call(c.element),n.hooks.run("after-highlight",c),n.hooks.run("complete",c)},d.postMessage(JSON.stringify({language:c.language,code:c.code,immediateClose:!0}))}else c.highlightedCode=n.highlight(c.code,c.grammar,c.language),n.hooks.run("before-insert",c),c.element.innerHTML=c.highlightedCode,i&&i.call(r),n.hooks.run("after-highlight",c),n.hooks.run("complete",c)},highlight:function(e,t,a){var i=n.tokenize(e,t);return r.stringify(n.util.encode(i),a)},tokenize:function(e,t){var r=n.Token,a=[e],i=t.rest;if(i){for(var o in i)t[o]=i[o];delete t.rest}e:for(var o in t)if(t.hasOwnProperty(o)&&t[o]){var s=t[o];s="Array"===n.util.type(s)?s:[s];for(var _=0;_<s.length;++_){var l=s[_],c=l.inside,d=!!l.lookbehind,u=0,f=l.alias;l=l.pattern||l;for(var p=0;p<a.length;p++){var h=a[p];if(a.length>e.length)break e;if(!(h instanceof r)){l.lastIndex=0;var g=l.exec(h);if(g){d&&(u=g[1].length);var m=g.index-1+u,g=g[0].slice(u),E=g.length,T=m+E,b=h.slice(0,m+1),x=h.slice(T+1),y=[p,1];b&&y.push(b);var R=new r(o,c?n.tokenize(g,c):g,f);y.push(R),x&&y.push(x),Array.prototype.splice.apply(a,y)}}}}}return a},hooks:{all:{},add:function(e,t){var r=n.hooks.all;r[e]=r[e]||[],r[e].push(t)},run:function(e,t){var r=n.hooks.all[e];if(r&&r.length)for(var a,i=0;a=r[i++];)a(t)}}},r=n.Token=function(e,t,n){this.type=e,this.content=t,this.alias=n};if(r.stringify=function(e,t,a){if("string"==typeof e)return e;if("Array"===n.util.type(e))return e.map(function(n){return r.stringify(n,t,e)}).join("");var i={type:e.type,content:r.stringify(e.content,t,a),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:a};if("comment"==i.type&&(i.attributes.spellcheck="true"),e.alias){var o="Array"===n.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(i.classes,o)}n.hooks.run("wrap",i);var s="";for(var _ in i.attributes)s+=(s?" ":"")+_+'="'+(i.attributes[_]||"")+'"';return"<"+i.tag+' class="'+i.classes.join(" ")+'" '+s+">"+i.content+"</"+i.tag+">"},!e.document)return e.addEventListener?(e.addEventListener("message",function(t){var r=JSON.parse(t.data),a=r.language,i=r.code,o=r.immediateClose;e.postMessage(n.highlight(i,n.languages[a],a)),o&&e.close()},!1),e.Prism):e.Prism;var a=document.getElementsByTagName("script");return a=a[a.length-1],a&&(n.filename=a.src,document.addEventListener&&!a.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",n.highlightAll)),e.Prism}();"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof global&&(global.Prism=t)}(),Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,"boolean":/\b(true|false)\b/,"function":/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|false|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,"function":/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i}),Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0}}),Prism.languages.insertBefore("javascript","class-name",{"template-string":{pattern:/`(?:\\`|\\?[^`])*`/,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}}}),Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/<script[\w\W]*?>[\w\W]*?<\/script>/i,inside:{tag:{pattern:/<script[\w\W]*?>|<\/script>/i,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.javascript},alias:"language-javascript"}}),Prism.languages.js=Prism.languages.javascript;var e=document.createElement("style");e.textContent='body,html{padding:0;margin:0;}code[class*=language-],pre[class*=language-]{color:#333;font-size: 13.5px;font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;-moz-tab-size:4;-o-tab-size:4;line-height:1.45;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:.5em .75em;margin:0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#333}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#3554FF}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#395CC7}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#BD0054;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#D63680}.token.function{color:#8054C3}.token.important,.token.regex,.token.variable{color:#0B9BCC}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}',document.head.innerHTML="",document.head.appendChild(e);var t=document.body.textContent,n=js_beautify(t,{end_with_newline:!0,indent_size:2}),r=Prism.highlight(n,Prism.languages.javascript);document.body.innerHTML='<code><pre class="language-js">'+r+"</pre></code>"}document.body.innerHTML='<div style="color: #bbb; -webkit-filter: blur(1px); filter: blur(1px);">'+document.body.innerHTML+"</div>",setTimeout(e,50)})();
```

or copy it from [here](https://raw.github.com/marcobarcelos/jsprettifier-bookmarklet/master/dist/bookmarklet.md).

### Before

```
(function(){function printInfo(o){console.log(o.name,"(",o.email,")","-",o.website);}var person={name:"Marco Barcelos",email:"me@marcobarcelos.com",website:"http://marcobarcelos.com"};printInfo(person);})();
```

### After

```javascript
(function() {
  function printInfo(o) {
    console.log(o.name, "(", o.email, ")", "-", o.website);
  }
  var person = {
    name: "Marco Barcelos",
    email: "me@marcobarcelos.com",
    website: "http://marcobarcelos.com"
  };
  printInfo(person);
})();
```

# Uses

* [js-beautify](https://github.com/beautify-web/js-beautify)
* [prism](https://github.com/PrismJS/prism)

# License

[MIT License](http://en.wikipedia.org/wiki/MIT_License)
(c) [Marco Barcelos](http://marcobarcelos.com)
